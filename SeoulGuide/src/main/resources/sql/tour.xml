<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
						"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.tour">
	<select id="selecttourlist" resultType="com.seoul.guide.tour.DTO.TourDTO">
    <![CDATA[
        select * from tourist
    ]]>
	</select>
	
	<select id="searchdetail" parameterType = "java.util.Map" resultType="com.seoul.guide.tour.DTO.TourDTO">
         select * from tourist where
          <foreach collection="menu_icon" item="menu" index="index" open="("  separator = " " close =")" >
	    	<if test ='index>0'>or</if>
	    	
	    	<if test='menu == "type1"'>
	    	 (menu_icon1 = 1 or menu_icon3 = 1 or menu_icon4 = 1)  or tourist_subtitle=#{tourist_subtitle}
	    	</if>
	    	
	    	<if test='menu == "type2"'>
	    		 menu_icon6 = 1 or tourist_subtitle=#{tourist_subtitle}
	    	</if>
	    	
	    	<if test='menu == "type3"'>
	    		menu_icon5 = 1 or tourist_subtitle=#{tourist_subtitle}
	    	</if>
	    	
	    	<if test='menu == "type4"'>
	    		menu_icon2 = 1 or tourist_subtitle=#{tourist_subtitle}
	    	</if>

	    </foreach> 
        
	</select>
	
	<select id="search" parameterType="String" resultType="com.seoul.guide.tour.DTO.TourDTO">
	  <![CDATA[
		select * from tourist where tourist_name like concat('%', #{word}, '%')
		]]>
	</select>
	
	<select id="detail" parameterType="Integer" resultType="com.seoul.guide.tour.DTO.TourDTO">
		<![CDATA[
			select * from tourist where tourist_id=#{tourist_id}
		]]>
	</select>
</mapper>						